:root{
  --bg1:#05070f;
  --bg2:#070a16;
  --card:rgba(255,255,255,.05);
  --card2:rgba(255,255,255,.035);
  --stroke:rgba(255,255,255,.10);
  --stroke2:rgba(255,255,255,.08);
  --txt:#eaf0ff;
  --muted:rgba(234,240,255,.75);
  --muted2:rgba(234,240,255,.55);
  --blue:#4c85ff;
  --blue2:rgba(76,133,255,.22);
  --bad:#ff5a5a;
  --good:#55d66a;
  --radius:18px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--txt);
  background:
    radial-gradient(1200px 900px at 15% 10%, rgba(76,133,255,.20), transparent 60%),
    radial-gradient(900px 700px at 85% 20%, rgba(165,80,255,.18), transparent 60%),
    radial-gradient(900px 900px at 50% 110%, rgba(0,0,0,.65), transparent 60%),
    linear-gradient(180deg,var(--bg2),var(--bg1));
}

.app{
  max-width:980px;
  margin:0 auto;
  padding:18px 14px 14px;
  min-height:100%;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.top{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  padding:14px 14px;
  border-radius:22px;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--stroke2);
  box-shadow:0 16px 50px rgba(0,0,0,.35);
}

.top__title{font-weight:950;font-size:16px}
.top__sub{font-size:12px;color:var(--muted2);margin-top:4px}

.pill{
  padding:10px 12px;
  border-radius:999px;
  background:rgba(255,255,255,.06);
  border:1px solid var(--stroke);
  font-weight:900;
  font-size:12px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.pill--mono{font-variant-numeric:tabular-nums}

.main{flex:1; display:flex}
#screen{width:100%}

.card{
  border-radius:22px;
  background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
  border:1px solid var(--stroke2);
  box-shadow:0 16px 60px rgba(0,0,0,.35);
  padding:14px;
}

.h1{font-weight:950;font-size:16px}
.hint{margin-top:4px;color:var(--muted);font-size:12px;line-height:1.25}

.grid2{
  margin-top:12px;
  display:grid;
  grid-template-columns:1.2fr .8fr;
  gap:12px;
}
@media (max-width:760px){
  .grid2{grid-template-columns:1fr}
}

.panel{
  border-radius:18px;
  background:rgba(255,255,255,.035);
  border:1px solid var(--stroke2);
  padding:12px;
}

.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.rowBetween{display:flex;gap:10px;align-items:center;justify-content:space-between;flex-wrap:wrap}

.btn{
  border:0;
  padding:12px 14px;
  border-radius:14px;
  background:linear-gradient(180deg, rgba(76,133,255,.95), rgba(76,133,255,.78));
  color:#fff;
  font-weight:950;
  cursor:pointer;
  box-shadow:0 14px 40px rgba(76,133,255,.18);
  border:1px solid rgba(76,133,255,.35);
}
.btn:disabled{opacity:.55;cursor:not-allowed;box-shadow:none}

.btnGhost{
  border:1px solid var(--stroke);
  padding:12px 14px;
  border-radius:14px;
  background:rgba(255,255,255,.05);
  color:var(--txt);
  font-weight:950;
  cursor:pointer;
}
.btnGhost:disabled{opacity:.55;cursor:not-allowed}

.chip{
  border:1px solid var(--stroke);
  background:rgba(255,255,255,.05);
  color:var(--txt);
  padding:8px 10px;
  border-radius:999px;
  font-weight:900;
  font-size:12px;
  cursor:pointer;
}
.chip.active{
  outline:2px solid rgba(76,133,255,.85);
  background:rgba(76,133,255,.16);
  border-color:rgba(76,133,255,.30);
}

.input{
  width:100%;
  padding:12px 12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background:rgba(255,255,255,.05);
  color:var(--txt);
  outline:none;
  font-weight:900;
}

.range{width:100%; accent-color:var(--blue)}

.kpis{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:10px;
  margin-top:10px;
}
@media (max-width:520px){ .kpis{grid-template-columns:1fr} }
.kpi{
  border-radius:14px;
  padding:10px 10px;
  background:rgba(255,255,255,.03);
  border:1px solid var(--stroke2);
}
.kpi .t{font-size:11px;color:var(--muted2)}
.kpi .v{margin-top:4px;font-size:16px;font-weight:950}

.msg{
  margin-top:10px;
  min-height:18px;
  font-weight:950;
}
.msg.good{color:var(--good)}
.msg.bad{color:var(--bad)}
.msg.dim{color:var(--muted2)}

.nav{
  display:flex;
  gap:10px;
  padding:10px;
  border-radius:20px;
  background:rgba(255,255,255,.03);
  border:1px solid var(--stroke2);
}
.nav__btn{
  flex:1;
  padding:12px 10px;
  border-radius:16px;
  border:1px solid var(--stroke2);
  background:rgba(255,255,255,.04);
  color:var(--txt);
  font-weight:950;
  cursor:pointer;
}
.nav__btn.active{
  outline:2px solid rgba(76,133,255,.85);
  background:rgba(76,133,255,.14);
  border-color:rgba(76,133,255,.30);
}

.footer{
  text-align:center;
  font-size:12px;
  color:var(--muted2);
  margin-bottom:4px;
}

/* =======================
   COIN FLIP (3D)
======================= */
.coinStage{
  height:290px;
  border-radius:18px;
  background:
    radial-gradient(200px 140px at 50% 15%, rgba(255,255,255,.10), rgba(255,255,255,0) 60%),
    linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:1px solid var(--stroke2);
  display:grid;
  place-items:center;
  position:relative;
  overflow:hidden;
  perspective:1100px;
}

.coinShadow{
  position:absolute;
  width:140px;height:28px;border-radius:50%;
  background:rgba(0,0,0,.45);
  filter:blur(12px);
  opacity:.55;
  bottom:56px;
  transform:scale(.8);
  transition:transform .2s ease, opacity .2s ease;
}

.coin3d{
  width:140px;
  height:140px;
  position:relative;
  transform-style:preserve-3d;
  border-radius:50%;
  will-change:transform;
}

.coin3d .rim{
  position:absolute;
  inset:-6px;
  border-radius:50%;
  transform:translateZ(0px);
  background:conic-gradient(from 0deg,
    rgba(255,255,255,.22), rgba(0,0,0,.10),
    rgba(255,255,255,.18), rgba(0,0,0,.12),
    rgba(255,255,255,.22));
  opacity:.55;
  filter:blur(.2px);
}

.coin3d .face{
  position:absolute; inset:0;
  border-radius:50%;
  display:flex;
  align-items:center;
  justify-content:center;
  backface-visibility:hidden;
  border:1px solid rgba(255,255,255,.18);
  box-shadow:
    0 18px 45px rgba(0,0,0,.35),
    0 0 0 2px rgba(0,0,0,.12) inset;
}

.coin3d .label{
  font-weight:950;
  letter-spacing:.6px;
  text-transform:uppercase;
  padding:10px 14px;
  border-radius:16px;
  border:1px solid rgba(255,255,255,.18);
  background:rgba(0,0,0,.18);
  text-shadow:0 8px 18px rgba(0,0,0,.45);
}

/* faces colors controlled by state */
.coin3d.coin--neutral .front,
.coin3d.coin--neutral .back{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.18), rgba(255,255,255,0) 58%),
    radial-gradient(circle at 65% 85%, rgba(255,255,255,.08), rgba(255,255,255,0) 55%),
    linear-gradient(145deg, rgba(165,80,255,.98), rgba(90,40,165,.98));
}
.coin3d.coin--neutral .label{opacity:.0} /* до броска текста не видно */

.coin3d.coin--heads .front{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.18), rgba(255,255,255,0) 58%),
    radial-gradient(circle at 65% 85%, rgba(255,255,255,.08), rgba(255,255,255,0) 55%),
    linear-gradient(145deg, rgba(255,214,110,.98), rgba(175,110,10,.98));
}
.coin3d.coin--heads .back{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.18), rgba(255,255,255,0) 58%),
    radial-gradient(circle at 65% 85%, rgba(255,255,255,.08), rgba(255,255,255,0) 55%),
    linear-gradient(145deg, rgba(255,214,110,.98), rgba(175,110,10,.98));
}

.coin3d.coin--tails .front,
.coin3d.coin--tails .back{
  background:
    radial-gradient(circle at 30% 25%, rgba(255,255,255,.18), rgba(255,255,255,0) 58%),
    radial-gradient(circle at 65% 85%, rgba(255,255,255,.08), rgba(255,255,255,0) 55%),
    linear-gradient(145deg, rgba(220,230,245,.98), rgba(95,115,145,.98));
}

.coin3d .front{ transform: translateZ(10px); }
.coin3d .back{ transform: rotateY(180deg) translateZ(10px); }

.coinThrow{
  --rx: 1600deg;
  --rz: 520deg;
  animation: coinThrow 1.1s cubic-bezier(.18,.85,.18,1) both;
}
@keyframes coinThrow{
  0%   { transform: translateY(32px) rotateX(0deg) rotateZ(0deg) scale(.98); }
  20%  { transform: translateY(-70px) rotateX(calc(var(--rx)*.35)) rotateZ(calc(var(--rz)*.35)) scale(1.03); }
  55%  { transform: translateY(-110px) rotateX(calc(var(--rx)*.78)) rotateZ(calc(var(--rz)*.78)) scale(1.04); }
  82%  { transform: translateY(-22px) rotateX(calc(var(--rx)*.93)) rotateZ(calc(var(--rz)*.93)) scale(1.01); }
  100% { transform: translateY(0px) rotateX(var(--rx)) rotateZ(var(--rz)) scale(1.00); }
}

/* =======================
   DICE (bar + marker)
======================= */
.diceBar{
  margin-top:10px;
  border-radius:18px;
  background:rgba(255,255,255,.03);
  border:1px solid var(--stroke2);
  padding:12px;
}

.barWrap{
  margin-top:10px;
  height:22px;
  border-radius:999px;
  background:rgba(255,255,255,.05);
  border:1px solid var(--stroke2);
  position:relative;
  overflow:hidden;
}

.barWin{
  position:absolute; top:0; bottom:0;
  background:rgba(85,214,106,.16);
}

.barLose{
  position:absolute; top:0; bottom:0;
  background:rgba(255,90,90,.10);
  opacity:.35;
}

.barMarker{
  position:absolute;
  top:50%;
  width:18px;height:18px;border-radius:50%;
  background:rgba(255,255,255,.85);
  border:1px solid rgba(0,0,0,.25);
  transform:translate(-50%,-50%);
  box-shadow:0 10px 18px rgba(0,0,0,.35);
  left:0%;
}

.barMarker.anim{
  transition:left .75s cubic-bezier(.12,.85,.12,1);
}

.pillHint{
  margin-left:auto;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid var(--stroke);
  background:rgba(255,255,255,.06);
  font-weight:950;
  font-size:12px;
}

/* =======================
   MINES
======================= */
.minesGrid{
  display:grid;
  grid-template-columns:repeat(5,1fr);
  gap:10px;
  margin-top:12px;
}
.tile{
  height:56px;
  border-radius:16px;
  border:1px solid var(--stroke);
  background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
  box-shadow:0 12px 22px rgba(0,0,0,.25);
  position:relative;
  overflow:hidden;
  cursor:pointer;
  transform-style:preserve-3d;
  transition:transform .12s ease, border-color .12s ease, background .12s ease;
}
.tile:active{transform: translateY(1px) scale(.985);}
.tile:disabled{opacity:.85;cursor:not-allowed;}

.tile::before{
  content:"";
  position:absolute; inset:0;
  background: radial-gradient(80px 60px at 30% 20%, rgba(255,255,255,.10), rgba(255,255,255,0));
  opacity:.9;
  pointer-events:none;
}
.tileInner{
  position:absolute; inset:0;
  display:flex;align-items:center;justify-content:center;
  font-weight:950;
  font-size:18px;
  transform: translateZ(2px);
}
.tile.open{ animation: tileFlip .22s ease-out both; }
@keyframes tileFlip{ from{transform: rotateX(18deg) scale(.94);} to{transform: rotateX(0deg) scale(1);} }

.tile.safe{
  background: linear-gradient(180deg, rgba(42,102,255,.20), rgba(42,102,255,.08));
  border-color: rgba(42,102,255,.38);
  box-shadow: 0 12px 22px rgba(0,0,0,.25), 0 0 0 1px rgba(42,102,255,.12) inset;
}
.tile.mine{
  background: linear-gradient(180deg, rgba(255,80,80,.22), rgba(255,80,80,.08));
  border-color: rgba(255,80,80,.38);
  box-shadow: 0 12px 22px rgba(0,0,0,.25), 0 0 0 1px rgba(255,80,80,.12) inset;
}
.tile.boom{animation: boom .25s ease-out;}
@keyframes boom{0%{transform:scale(1);}50%{transform:scale(1.05);}100%{transform:scale(1);} }
